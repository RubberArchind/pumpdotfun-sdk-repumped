{"version":3,"file":"PdaModule.mjs","sources":["../../../../src/modules/PdaModule.ts"],"sourcesContent":["import { PublicKey } from \"@solana/web3.js\";\r\nimport {\r\n  GLOBAL_ACCOUNT_SEED,\r\n  EVENT_AUTHORITY_SEED,\r\n  BONDING_CURVE_SEED,\r\n  MINT_AUTHORITY_SEED,\r\n  MPL_TOKEN_METADATA_PROGRAM_ID,\r\n  METADATA_SEED,\r\n  GLOBAL_VOLUME_SEED,\r\n  USER_VOLUME_SEED,\r\n  PUMP_PROGRAM_ID,\r\n  PUMP_FEE_PROGRAM_ID,\r\n  MAYHEM_PROGRAM_ID,\r\n  MAYHEM_STATE_SEED,\r\n  GLOBAL_PARAMS_SEED,\r\n  SOL_VAULT_SEED,\r\n  TOKEN_2022_PROGRAM_ID,\r\n  LEGACY_TOKEN_PROGRAM_ID,\r\n} from \"../pumpFun.consts.js\";\r\nimport { PumpFunSDK } from \"../PumpFunSDK.js\";\r\n\r\nexport class PdaModule {\r\n  constructor(private sdk: PumpFunSDK) {}\r\n\r\n  getCreatorVaultPda(creator: PublicKey): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(\"creator-vault\"), creator.toBuffer()],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getGlobalAccountPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(GLOBAL_ACCOUNT_SEED)],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getEventAuthorityPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(EVENT_AUTHORITY_SEED)],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getBondingCurvePDA(mint: PublicKey, tokenProgram: PublicKey = LEGACY_TOKEN_PROGRAM_ID) {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(BONDING_CURVE_SEED), mint.toBuffer(), tokenProgram.toBuffer()],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getMintAuthorityPDA() {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(MINT_AUTHORITY_SEED)],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getPumpFeeConfigPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(\"fee_config\"), PUMP_PROGRAM_ID.toBuffer()],\r\n      PUMP_FEE_PROGRAM_ID\r\n    )[0];\r\n  }\r\n\r\n  getMetadataPDA(mint: PublicKey): PublicKey {\r\n    const metadataProgram = new PublicKey(MPL_TOKEN_METADATA_PROGRAM_ID);\r\n\r\n    const [metadataPDA] = PublicKey.findProgramAddressSync(\r\n      [Buffer.from(METADATA_SEED), metadataProgram.toBuffer(), mint.toBuffer()],\r\n      metadataProgram\r\n    );\r\n    return metadataPDA;\r\n  }\r\n\r\n  getGlobalVolumeAccumulatorPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(GLOBAL_VOLUME_SEED)],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  getUserVolumeAccumulatorPda(user: PublicKey): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(USER_VOLUME_SEED), user.toBuffer()],\r\n      this.sdk.program.programId\r\n    )[0];\r\n  }\r\n\r\n  // Mayhem mode PDAs (Breaking change Nov 11, 2025)\r\n  getMayhemStatePda(mint: PublicKey): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(MAYHEM_STATE_SEED), mint.toBuffer()],\r\n      MAYHEM_PROGRAM_ID\r\n    )[0];\r\n  }\r\n\r\n  getGlobalParamsPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(GLOBAL_PARAMS_SEED)],\r\n      MAYHEM_PROGRAM_ID\r\n    )[0];\r\n  }\r\n\r\n  getSolVaultPda(): PublicKey {\r\n    return PublicKey.findProgramAddressSync(\r\n      [Buffer.from(SOL_VAULT_SEED)],\r\n      MAYHEM_PROGRAM_ID\r\n    )[0];\r\n  }\r\n\r\n  getMayhemTokenVaultPda(mint: PublicKey): PublicKey {\r\n    const solVault = this.getSolVaultPda();\r\n    const TOKEN_2022_PROGRAM = new PublicKey(\r\n      \"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb\"\r\n    );\r\n    \r\n    // This is an Associated Token Account PDA for the sol vault\r\n    return PublicKey.findProgramAddressSync(\r\n      [solVault.toBuffer(), TOKEN_2022_PROGRAM.toBuffer(), mint.toBuffer()],\r\n      new PublicKey(\"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL\") // Associated Token Program\r\n    )[0];\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}